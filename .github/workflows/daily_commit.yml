name: Chess-Tiered Daily Commits

on:
  schedule:
    - cron: "0 0 * * *" # Every day at midnight UTC
  workflow_dispatch:

permissions:
  contents: write

jobs:
  commit:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Git identity
        run: |
          git config --global user.email "aarussh22@gmail.com"
          git config --global user.name "GitHub Commit Bot"

      - name: Determine Chess Piece and Generate Commits
        run: |
          DAY_OF_WEEK=$(date +%u)  # 1 (Mon) to 7 (Sun)

          declare -A PIECE_MAP=(
            [1]="â™™ Pawn"
            [2]="â™˜ Knight"
            [3]="â™— Bishop"
            [4]="â™– Rook"
            [5]="â™• Queen"
            [6]="â™” King"
            [7]="Rest"
          )

          declare -A BASE_COMMITS=(
            [1]=1
            [2]=2
            [3]=3
            [4]=5
            [5]=8
            [6]=13
            [7]=0
          )

          PIECE_NAME=${PIECE_MAP[$DAY_OF_WEEK]}
          BASE=${BASE_COMMITS[$DAY_OF_WEEK]}

          # If it's Sunday (Rest day), skip commits
          if [ "$BASE" -eq 0 ]; then
            echo "ðŸ›Œ Sunday is a rest day. No commits today!"
            exit 0
          fi

          # Add random multiplier to vary activity
          RANDOM_MULT=$(( (RANDOM % 4) + 1 ))
          NUM_COMMITS=$(( BASE * RANDOM_MULT ))

          echo "ðŸ§  Day of Week: $DAY_OF_WEEK"
          echo "â™Ÿï¸ Chess Piece: $PIECE_NAME"
          echo "ðŸ“Š Base Commits: $BASE"
          echo "ðŸŽ² Random Multiplier: $RANDOM_MULT"
          echo "âœ… Total Commits: $NUM_COMMITS"

          for i in $(seq 1 $NUM_COMMITS); do
            RANDOM_VAL=$(( RANDOM % 1000 ))
            TIME=$(TZ="America/New_York" date +"%Y-%m-%d %H:%M:%S %Z")
            COMMIT_MSG="[$PIECE_NAME] Commit #$i on $TIME (rand:$RANDOM_VAL)"
            echo "$COMMIT_MSG" > auto_commit_log.txt
            git add auto_commit_log.txt
            git commit -m "$COMMIT_MSG"
          done

      - name: Push changes
        run: git push
